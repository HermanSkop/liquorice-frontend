<div class="card h-100">
    <div class="d-flex h-100" [class.flex-column]="!isSingleColumn" [class.flex-row]="isSingleColumn">

      <div [class.col-md-3]="isSingleColumn"
           [class.w-100]="!isSingleColumn"
           [class.text-center]="!isSingleColumn"
           [class.p-2]="true"
           class="d-flex align-items-center justify-content-center">
        <img [src]="product.image && isValidBase64(product.image) ?
                   ('data:image/jpeg;base64,' + product.image) :
                   'placeholder.png'"
             [class.img-top]="!isSingleColumn"
             [class.h-auto]="!isSingleColumn"
             [class.w-75]="!isSingleColumn"
             [class.mw-100]="isSingleColumn"
             class="img-fluid rounded"
             alt="{{ product.name }}">
      </div>

      <div [class.col-md-9]="isSingleColumn" [class.w-100]="!isSingleColumn" class="p-3">
        <div class="card-body d-flex"
             [class.flex-column]="!isSingleColumn"
             [class.justify-content-between]="isSingleColumn">

          <div class="d-flex flex-column" [class.align-items-center]="!isSingleColumn" [class.align-items-start]="isSingleColumn">
            <h5 class="card-title mb-2" [class.text-center]="!isSingleColumn">{{ product.name }}</h5>
            <p class="card-text text-muted mb-2" [class.text-center]="!isSingleColumn">{{ product.description }}</p>
            <div [class.text-center]="!isSingleColumn" [class.mb-2]="true">
              <span *ngFor="let category of product.categories" class="badge bg-secondary me-1">{{ category }}</span>
            </div>
            <p class="card-text mt-1"><span class="badge bg-warning">Left: {{ product.amountLeft }}</span></p>
          </div>

          <button class="btn btn-primary d-flex align-items-center gap-2 px-3 py-2"
                  [class.mt-3]="!isSingleColumn"
                  [class.align-self-center]="!isSingleColumn"
                  [class.align-self-start]="isSingleColumn"
                  (click)="addToCart()">
            <i class="bi bi-cart-plus"></i>
            <span class="badge bg-light text-primary ms-1">${{ product.price }}</span>
          </button>
        </div>
      </div>
    </div>
  </div>
